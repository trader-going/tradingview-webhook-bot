# TradingView 웹훅 고잉봇 - 사용자 설명서

<img width="1604" height="932" alt="main" src="https://github.com/user-attachments/assets/3e272755-07fe-4420-b0b9-f2014bbe8290" />

프로그램 다운로드: [구글 드라이브](https://drive.google.com/drive/folders/1-eWL55uQGM83Eqm5irc-tMh6J-QYOVss)
설치방법: [GitHub Wiki](https://github.com/trader-going/tradingview-webhook-bot/wiki/%EA%B3%A0%EC%9E%89%EB%B4%87-%EC%84%B8%ED%8C%85-%EB%B0%A9%EB%B2%95)

## 목차

1. [프로그램 소개](#1-프로그램-소개)
2. [시작하기 전에](#2-시작하기-전에)
3. [설치 및 초기 설정](#3-설치-및-초기-설정)
4. [화면 구성](#4-화면-구성)
5. [TradingView 웹훅 설정](#5-tradingview-웹훅-설정)
6. [기능별 사용법](#6-기능별-사용법)
7. [설정 옵션](#7-설정-옵션)
8. [문제 해결](#8-문제-해결)
9. [주의사항](#9-주의사항)

---

## 1. 프로그램 소개

**TradingView 웹훅 고잉봇**은 TradingView의 웹훅 알림을 받아 업비트/바이낸스에서 자동으로 주문을 실행하는 프로그램입니다.

### 주요 기능

- TradingView 전략 알림 → 자동 매매 실행
- 업비트 / 바이낸스 현물 & 선물 지원
- 실시간 BTC/ETH 가격 및 김치프리미엄 표시
- 잔고 조회 및 일괄 청산
- 수동 주문 기능
- 웹훅 로그 및 주문 내역 관리
- IP 화이트리스트 보안

---

## 2. 시작하기 전에

### 필수 준비물

1. **거래소 계정**
   - 업비트 계정 (국내 거래용)
   - 바이낸스 계정 (해외 거래용, 선택)

2. **API 키**
   - 각 거래소에서 API 키 발급 필요
   - IP 제한 설정 권장

3. **네트워크 환경**
   - 포트 포워딩이 가능한 환경 (또는 ngrok 사용)
   - TradingView에서 접근 가능한 공인 IP

4. **TradingView 계정**
   - Pro 이상 구독 권장 (웹훅 알림 기능)

---

## 3. 설치 및 초기 설정

### Step 1: API 키 발급

#### 업비트 API 키 발급

1. [업비트](https://upbit.com) 로그인
2. 마이페이지 → Open API 관리
3. **Open API Key 발급하기** 클릭
4. 권한 설정:
   - ✅ 자산조회
   - ✅ 주문조회
   - ✅ 주문하기
   - ❌ 출금하기 (보안상 비활성화 권장)
5. **IP 주소 등록** (중요!)
   - 프로그램 상단에 표시되는 공인 IP를 등록
6. API Key와 Secret Key 복사 (Secret Key는 한 번만 표시됨!)

#### 바이낸스 API 키 발급

1. [바이낸스](https://www.binance.com) 로그인
2. 프로필 → API Management
3. **Create API** 클릭
4. 권한 설정:
   - ✅ Enable Reading
   - ✅ Enable Spot & Margin Trading
   - ✅ Enable Futures (선물 거래 시)
5. **IP 접근 제한** 설정 권장
6. API Key와 Secret Key 복사

### Step 2: 설정 파일 구성

1. `config.yml.example` 파일을 `config.yml`로 복사
2. 텍스트 편집기로 `config.yml` 열기
3. API 키 입력:

```yaml
webhook:
  port: 8000

exchanges:
  upbit:
    api_key: 발급받은_업비트_API_KEY
    secret_key: 발급받은_업비트_SECRET_KEY
  binance:
    api_key: 발급받은_바이낸스_API_KEY
    secret_key: 발급받은_바이낸스_SECRET_KEY
```

### Step 3: 프로그램 실행

1. `TradingView_Webhook_GoingBot.exe` 실행
2. 상단에서 서버 상태 확인 (초록색 "실행 중" 표시)
3. 연결 상태에서 거래소 연결 확인

### Step 4: 포트 포워딩 설정 (필수)

TradingView에서 웹훅을 보내려면 외부에서 접근 가능해야 합니다.

#### 공유기 포트 포워딩

1. 공유기 관리 페이지 접속 (보통 192.168.0.1 또는 192.168.1.1)
2. 포트 포워딩 설정 메뉴 찾기
3. 설정 추가:
   - 외부 포트: 8000 (또는 원하는 포트)
   - 내부 IP: 프로그램 실행 PC의 내부 IP
   - 내부 포트: 8000
   - 프로토콜: TCP

#### ngrok 사용 (대안)

포트 포워딩이 어려운 경우:

```bash
ngrok http 8000
```

ngrok에서 제공하는 URL을 TradingView 웹훅 URL로 사용

---

## 4. 화면 구성

### 상단 시스템 바

```
[날짜/시간] [IP: xxx.xxx.xxx.xxx] [CPU/MEM] [USD/KRW 환율] [김프 %]
[UPBIT BTC ₩xxx (±x.xx%)] [ETH ₩xxx] [BINANCE BTC $xxx (±x.xx%)] [ETH $xxx]
```

- **날짜/시간**: 현재 시각
- **IP**: 외부 공인 IP (프라이버시 모드로 숨김 가능)
- **CPU/MEM**: 시스템 리소스 사용량
- **USD/KRW**: 실시간 환율 (60초마다 갱신)
- **김프**: 김치프리미엄 퍼센트 (업비트 BTC vs 바이낸스 BTC)
- **가격**: 실시간 BTC/ETH 가격 및 24시간 변동률

### 툴바

| 버튼 | 설명 |
|------|------|
| 로고 | 프로그램 로고 |
| 트레이딩뷰 유저 코리아 | 카카오톡 오픈채팅방 |
| 개발자 문의 | 개발자 문의 |
| 서버 상태 | 웹훅 서버 실행 상태 |
| 웹훅 얼러트 템플릿 복사 | TradingView용 JSON 템플릿 |
| 트레이딩뷰 예제 전략 복사 | Pine Script 예제 |
| 프라이버시 토글 | IP/잔고 정보 숨김 |
| 새로고침 | 잔고 새로고침 |
| 설정 | 설정 다이얼로그 |

### 좌측 패널

- **연결 상태**: 웹훅 서버, 업비트, 바이낸스 연결 상태
- **수동 주문**: GUI에서 직접 주문

### 중앙 패널

- **웹훅 로그 탭**: 수신된 웹훅 및 처리 결과
- **주문 내역 탭**: 체결된 주문 상세 정보

### 우측 패널

- **잔고 현황**: 업비트/바이낸스 탭으로 구분
- **일괄 청산**: 선택한 거래소의 모든 포지션 청산

---

## 5. TradingView 웹훅 설정

### Step 1: 웹훅 URL 확인

프로그램 상단의 IP와 포트를 확인하여 웹훅 URL 구성:

```
http://[공인IP]:8000/webhook
```

예시: `http://123.456.789.10:8000/webhook`

### Step 2: 얼러트 메시지 템플릿

프로그램에서 **"웹훅 얼러트 템플릿 복사"** 버튼 클릭 후 사용:

```json
{"symbol" : "{{ticker}}", "exchange" : "{{exchange}}", "price":"{{strategy.order.price}}", "position_size":"{{strategy.position_size}}", "amount":"{{strategy.order.contracts}}", "side": "{{strategy.order.action}}", "interval": "{{interval}}", "time": "{{time}}", "timenow": "{{timenow}}", "position": "{{strategy.market_position}}", "market_position_size": "{{strategy.market_position_size}}", "basecurrency": "{{syminfo.basecurrency}}", "currency": "{{syminfo.currency}}"}
```

### Step 3: TradingView에서 얼러트 생성

1. 차트에서 전략 적용
2. **알림(Alerts)** 탭 열기
3. **+ 알림 만들기** 클릭
4. 조건 설정:
   - 조건: [전략 이름]
   - 옵션: `Order fills only` (주문 체결 시에만)
5. **알림 동작** 설정:
   - ✅ 웹훅 URL 체크
   - URL 입력: `http://[공인IP]:8000/webhook`
6. **메시지** 입력:
   - 복사한 JSON 템플릿 붙여넣기
7. **만들기** 클릭

### Step 4: 테스트

1. TradingView에서 수동으로 알림 트리거
2. 프로그램의 웹훅 로그에서 수신 확인
3. 상태가 "SUCCESS"인지 확인

---

## 6. 기능별 사용법

### 6.1 잔고 조회

1. 우측 패널에서 **업비트** 또는 **바이낸스** 탭 선택
2. 자동으로 잔고 표시
3. 수동 새로고침: 상단 **새로고침** 버튼

**표시 정보:**
- 자산명
- 보유 수량
- 평가 금액
- 수익률 (%)
- 총 자산

### 6.2 수동 주문

1. 좌측 **수동 주문** 패널에서:
   - 거래소 선택 (UPBIT / BINANCE)
   - 심볼 입력 (예: BTC/KRW, ETH/USDT)
   - 주문 유형 선택 (MARKET / LIMIT)
   - 수량 입력
   - 가격 입력 (지정가 주문 시)
2. **매수** 또는 **매도** 버튼 클릭
3. 확인 다이얼로그에서 **예** 클릭

**업비트 시장가 주의사항:**
- 매수: 수량 = 원화 금액 (예: 10000 = 1만원어치)
- 매도: 수량 = 코인 수량 (예: 0.001 = 0.001 BTC)

### 6.3 일괄 청산

1. 우측 잔고 패널 하단의 **일괄청산** 버튼 클릭
2. 청산할 거래소 선택 (업비트 / 바이낸스 현물 / 바이낸스 선물)
3. 확인 다이얼로그에서 **예** 클릭
4. 모든 보유 자산이 시장가로 매도됨

⚠️ **주의:** 일괄 청산은 되돌릴 수 없습니다!

### 6.4 웹훅 로그

**웹훅 로그 탭:**
- 날짜/시간, 거래소, 심볼, 방향, 수량, 상태 표시
- 상태 색상:
  - 🟡 노랑: PENDING (처리 중)
  - 🟢 초록: SUCCESS (성공)
  - 🔴 빨강: FAILED (실패)

**주문 내역 탭:**
- 성공한 주문의 상세 정보
- 체결 수량, 체결가, 주문 ID 표시

**하단 컨트롤:**
- 자동 스크롤 체크박스
- DB 새로고침 버튼
- 로그 지우기 버튼

### 6.5 프라이버시 모드

상단 **프라이버시** 토글을 켜면:
- IP 주소: `***.***.***.***`로 표시
- 잔고 금액: `****`로 표시
- 웹훅 로그 상세 정보 숨김

방송이나 화면 공유 시 유용합니다.

---

## 7. 설정 옵션

상단 **설정** 버튼 클릭하여 접근

### 7.1 서버 탭

| 항목 | 설명 | 기본값 |
|------|------|--------|
| 포트 | 웹훅 서버 포트 | 8000 |

### 7.2 업비트 탭

| 항목 | 설명 |
|------|------|
| API Key | 업비트 API 키 |
| Secret Key | 업비트 시크릿 키 |

### 7.3 바이낸스 탭

| 항목 | 설명 |
|------|------|
| API Key | 바이낸스 API 키 |
| Secret Key | 바이낸스 시크릿 키 |

### 7.4 UI 설정 탭

**폰트 설정:**
- 기본 폰트 크기
- 폰트 종류

**잔고 설정:**
- 자동 새로고침
- 새로고침 간격 (초)

**시세 티커 설정:**
- 업비트 시세 표시
- 바이낸스 시세 표시
- 가격 변경 시 깜빡임

**색상 테마:**
- 액센트 색상
- 매수 색상
- 매도 색상
- 배경색 (어두운)
- 카드 배경색
- 기본 텍스트

⚠️ 색상 변경은 **프로그램 재시작 후** 적용됩니다.

### 7.5 보안 탭

**IP 화이트리스트:**
- TradingView 공식 IP는 자동 허용
- 추가 IP 등록/삭제 가능

---

## 8. 문제 해결

### 8.1 서버가 시작되지 않음

**증상:** 서버 상태가 빨간색 "오류"로 표시

**해결:**
1. 포트 충돌 확인 (다른 프로그램이 8000 포트 사용 중인지)
2. 설정에서 다른 포트로 변경 (예: 8080)
3. 방화벽에서 해당 포트 허용

### 8.2 거래소 연결 실패

**증상:** 연결 상태에서 빨간색 "연결 실패" 표시

**해결:**
1. API 키가 올바르게 입력되었는지 확인
2. API 키의 권한 설정 확인
3. **IP 허용 목록**에 현재 IP가 등록되었는지 확인
4. 거래소 서버 상태 확인

### 8.3 웹훅이 수신되지 않음

**증상:** TradingView에서 알림 발송했으나 로그에 표시 안됨

**해결:**
1. 웹훅 URL 확인 (`http://공인IP:포트/webhook`)
2. 포트 포워딩 설정 확인
3. 방화벽에서 포트 허용 확인
4. TradingView 알림 설정에서 웹훅 URL 체크 확인
5. ngrok 사용 시 URL이 만료되지 않았는지 확인

### 8.4 주문이 실패함

**증상:** 상태가 FAILED로 표시

**원인 확인:**
1. 웹훅 로그에서 해당 항목 클릭
2. 하단 상세 정보에서 에러 메시지 확인

**일반적인 원인:**
- 잔고 부족
- 최소 주문 수량 미달
- 심볼 형식 오류
- API 권한 부족

### 8.5 김치프리미엄이 표시되지 않음

**증상:** 김프가 `---`로 표시

**해결:**
1. 업비트와 바이낸스 모두 BTC 가격이 표시되는지 확인
2. 환율 데이터 수신 확인 (USD/KRW 값)
3. 인터넷 연결 확인

### 8.6 프로그램이 느림

**해결:**
1. 웹훅 로그가 너무 많으면 "로그 지우기"로 정리
2. 불필요한 다른 프로그램 종료
3. CPU 사용량 확인

---

## 9. 주의사항

### 9.1 보안 주의사항

1. **API 키 보안**
   - API 키를 절대 타인과 공유하지 마세요
   - 출금 권한은 비활성화 권장
   - IP 제한 설정 필수

2. **config.yml 보안**
   - config.yml 파일에 API 키가 저장됩니다
   - 이 파일을 절대 공유하지 마세요
   - 백업 시 암호화 권장

3. **화면 공유 시**
   - 프라이버시 모드 활성화
   - API 키 입력 화면 노출 주의

### 9.2 거래 주의사항

1. **테스트 우선**
   - 처음에는 소액으로 테스트
   - 전략 검증 후 금액 증가

2. **시장가 주문**
   - 슬리피지 발생 가능
   - 유동성 낮은 코인 주의

3. **일괄 청산**
   - 되돌릴 수 없는 작업
   - 신중하게 사용

4. **24시간 운영 시**
   - 안정적인 인터넷 연결 필요
   - UPS(무정전전원장치) 권장
   - 원격 모니터링 설정 권장

### 9.3 법적 고지

- 이 프로그램은 거래 도구일 뿐, 투자 조언을 제공하지 않습니다. 
- 암호화폐 거래는 높은 위험을 수반합니다.
- 투자 손실에 대한 책임은 사용자에게 있습니다
- 거주 국가의 관련 법규를 준수하세요

---

## 10. 라이센스

Copyright (c) 2025, 고잉 All rights reserved.

본 소프트웨어 및 관련 문서(이하 "소프트웨어")는  
**개인적, 교육적, 연구 목적에 한하여** 사용이 허용됩니다.

다음 행위는 **명시적으로 금지**됩니다:

- 상업적 사용, 판매, 재판매, 임대, 서비스 제공
- 본 소프트웨어를 이용한 수익 창출 행위
- 본 소프트웨어의 전부 또는 일부를 포함한 상업적 제품/서비스 배포
- 사전 서면 허가 없는 재배포

상업적 사용을 원할 경우, 저작권자의 **사전 서면 허가**를 받아야 합니다.

---

## 연락처

- **카카오톡 오픈채팅**: [트레이딩뷰 유저 코리아](https://open.kakao.com/o/gYMmhcYg)
- **개발자 문의**: [트레이더 고잉](https://open.kakao.com/me/trader_going)

---

*마지막 업데이트: 2025년 1월*

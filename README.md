# TradingView 웹훅 고잉봇 - 사용자 설명서

<img width="1685" height="933" alt="image" src="https://github.com/user-attachments/assets/cfafb0c4-d879-4a39-9161-4fbba0797064" />

프로그램 다운로드: [구글 드라이브](https://drive.google.com/drive/folders/1-eWL55uQGM83Eqm5irc-tMh6J-QYOVss)
설치방법: [GitHub Wiki](https://github.com/trader-going/tradingview-webhook-bot/wiki/%EA%B3%A0%EC%9E%89%EB%B4%87-%EC%84%B8%ED%8C%85-%EB%B0%A9%EB%B2%95)

## 목차

1. [프로그램 소개](#1-프로그램-소개)
2. [시작하기 전에](#2-시작하기-전에)
3. [설치 및 초기 설정](#3-설치-및-초기-설정)
4. [화면 구성](#4-화면-구성)
5. [TradingView 웹훅 설정](#5-tradingview-웹훅-설정)
6. [기능별 사용법](#6-기능별-사용법)
7. [설정 옵션](#7-설정-옵션)
8. [문제 해결](#8-문제-해결)
9. [주의사항](#9-주의사항)

---

## 1. 프로그램 소개

**TradingView 웹훅 고잉봇**은 TradingView의 웹훅 알림을 받아 암호화폐 거래소에서 자동으로 주문을 실행하는 프로그램입니다.

### 지원 거래소

| 거래소 | 현물 | 선물 | 비고 |
|--------|:----:|:----:|------|
| 업비트 | ✅ | - | 국내 최대 거래소 |
| 빗썸 | ✅ | - | 국내 거래소 |
| 바이낸스 | - | ✅ | 세계 최대 거래소 (선물 전용) |
| 바이비트 | - | ✅ | 파생상품 거래소 |
| OKX | - | 🚧 | 개발 중 |

### 주요 기능

- **자동 매매**: TradingView 전략 알림 → 자동 주문 실행
- **다양한 수량 표현**: `100USDT`, `50000KRW`, `25%`, `0.01` 등 유연한 수량 지정
- **선물 거래 지원**: 레버리지, 마진모드(격리/교차), 포지션 사이드 설정
- **실시간 차트**: 캔들 차트 + 주문 타점 마커 표시
- **실시간 시세**: BTC/ETH 가격, 김치프리미엄 표시
- **잔고 조회**: 거래소별 잔고 및 수익률 확인
- **일괄 청산**: 선택한 거래소의 모든 포지션 한 번에 청산
- **수동 주문**: GUI에서 직접 주문 (현물/선물 모두 지원)
- **토스트 알림**: 웹훅 수신, 주문 체결 시 알림
- **IP 화이트리스트**: TradingView IP 자동 허용 + 사용자 IP 관리

---

## 2. 시작하기 전에

### 필수 준비물

1. **거래소 계정 및 API 키**
   - 업비트, 빗썸: 국내 거래용
   - 바이낸스, 바이비트: 해외 선물 거래용

2. **네트워크 환경**
   - 포트 포워딩 가능한 환경 (또는 ngrok 사용)
   - TradingView에서 접근 가능한 공인 IP

3. **TradingView 계정**
   - Pro 이상 구독 권장 (웹훅 알림 기능)

---

## 3. 설치 및 초기 설정

### Step 1: API 키 발급

#### 업비트 API 키 발급

1. [업비트](https://upbit.com) 로그인
2. 마이페이지 → Open API 관리
3. **Open API Key 발급하기** 클릭
4. 권한 설정:
   - ✅ 자산조회
   - ✅ 주문조회
   - ✅ 주문하기
   - ❌ 출금하기 (보안상 비활성화 권장)
5. **IP 주소 등록** (중요!)
6. API Key와 Secret Key 복사

#### 빗썸 API 키 발급

1. [빗썸](https://www.bithumb.com) 로그인
2. 마이페이지 → API 관리
3. **API 생성** 클릭
4. 권한 설정:
   - ✅ 거래정보조회
   - ✅ 주문
   - ❌ 출금 (비활성화 권장)
5. API Key와 Secret Key 복사

#### 바이낸스 API 키 발급

1. [바이낸스](https://www.binance.com) 로그인
2. 프로필 → API Management
3. **Create API** 클릭
4. 권한 설정:
   - ✅ Enable Reading
   - ✅ Enable Futures (선물 거래)
5. IP 접근 제한 설정 권장
6. API Key와 Secret Key 복사

#### 바이비트 API 키 발급

1. [바이비트](https://www.bybit.com) 로그인
2. 계정 및 보안 → API 관리
3. **새 키 만들기** 클릭
4. 권한 설정:
   - ✅ 거래 읽기/쓰기
   - ✅ 포지션 읽기/쓰기
5. API Key와 Secret Key 복사

### Step 2: 설정 파일 구성

1. `config.yml.example` 파일을 `config.yml`로 복사
2. 텍스트 편집기로 `config.yml` 열기
3. API 키 입력:

```yaml
webhook:
  port: 8000

exchanges:
  upbit:
    api_key: "업비트_API_KEY"
    secret_key: "업비트_SECRET_KEY"
  bithumb:
    api_key: "빗썸_API_KEY"
    secret_key: "빗썸_SECRET_KEY"
  binance:
    api_key: "바이낸스_API_KEY"
    secret_key: "바이낸스_SECRET_KEY"
  bybit:
    api_key: "바이비트_API_KEY"
    secret_key: "바이비트_SECRET_KEY"
```

### Step 3: 프로그램 실행

1. `TradingView_Webhook_GoingBot.exe` 실행
2. 면책조항 동의 (최초 1회)
3. 상단에서 서버 상태 확인 (초록색 "실행 중" 표시)
4. 상태바에서 거래소 연결 확인

### Step 4: 포트 포워딩 설정 (필수)

TradingView에서 웹훅을 보내려면 외부에서 접근 가능해야 합니다.

#### 공유기 포트 포워딩

1. 공유기 관리 페이지 접속 (보통 192.168.0.1)
2. 포트 포워딩 설정 메뉴 찾기
3. 설정 추가:
   - 외부 포트: 8000
   - 내부 IP: 프로그램 실행 PC의 내부 IP
   - 내부 포트: 8000
   - 프로토콜: TCP

#### ngrok 사용 (대안)

포트 포워딩이 어려운 경우:

```bash
ngrok http 8000
```

ngrok에서 제공하는 URL을 TradingView 웹훅 URL로 사용

---

## 4. 화면 구성

### 상단 시스템 바

```
[날짜/시간] [IP: xxx.xxx.xxx.xxx] [CPU/MEM] [USD/KRW 환율] [김프 %]
[UPBIT BTC ₩xxx (±x.xx%)] [ETH ₩xxx] [BINANCE BTC $xxx (±x.xx%)] [ETH $xxx]
```

- **김프**: 김치프리미엄 퍼센트 (업비트 BTC vs 바이낸스 BTC × 환율)
- **가격**: 실시간 BTC/ETH 가격 및 24시간 변동률

### 툴바

| 버튼 | 설명 |
|------|------|
| 서버 상태 | 웹훅 서버 실행 상태 (초록: 실행 중) |
| 웹훅 얼러트 템플릿 복사 | TradingView Alert 메시지용 |
| 트레이딩뷰 예제 전략 복사 | Pine Script 예제 |
| 프라이버시 토글 | IP/잔고 정보 숨김 |
| 새로고침 | 잔고 새로고침 |
| 설정 | 설정 다이얼로그 |

### 좌측 패널

- **연결 상태**: 웹훅 서버, 각 거래소 연결 상태
- **수동 주문**: GUI에서 직접 주문 (현물/선물)

### 중앙 패널

- **웹훅 로그 탭**: 수신된 웹훅 및 처리 결과
- **주문 내역 탭**: 체결된 주문 상세 정보
- **Warning 탭**: IP 차단 등 경고 로그
- **차트**: 실시간 캔들 차트 + 주문 타점 마커

### 우측 패널

- **잔고 현황**: 거래소별 탭 (업비트, 빗썸, 바이낸스, 바이비트)
- **일괄 청산**: 선택한 거래소의 모든 포지션 청산

### 상태바

- 웹훅 서버 포트
- 각 거래소 연결 상태 (업비트, 빗썸, 바이낸스, 바이비트)

---

## 5. TradingView 웹훅 설정

### 새로운 웹훅 형식 (권장)

이번 버전부터 새로운 웹훅 형식을 사용합니다. Pine Script에서 `alert_message`로 JSON을 직접 생성하는 방식입니다.

### Step 1: Pine Script 설정

프로그램의 **"트레이딩뷰 예제 전략 복사"** 버튼을 클릭하거나, 아래 함수를 사용:

```pine
// 메시지 생성 함수
build_msg(string action, string qtyStr) =>
     '{"action":"' + action + '"' +
     ',"exchange":"{{exchange}}"' +
     ',"symbol":"{{ticker}}"' +
     ',"price":"{{strategy.order.price}}"' +
     ',"qty":"' + qtyStr + '"' +
     ',"leverage":' + str.tostring(leverage) +
     ',"time":"{{time}}"' +
     '}'

// 진입/청산 시 사용
if longEntry
    strategy.entry("L", strategy.long, qty=btQty, alert_message=build_msg("LONG_ENTRY", "100USDT"))

if longClose
    strategy.close("L", qty=btQty, alert_message=build_msg("LONG_CLOSE", "100%"))
```

### Step 2: TradingView Alert 설정

1. 차트에서 전략 적용
2. **알림(Alerts)** 탭 열기
3. **+ 알림 만들기** 클릭
4. 조건 설정:
   - 조건: [전략 이름]
   - 옵션: `Order fills only`
5. **알림 동작** 설정:
   - ✅ 웹훅 URL 체크
   - URL: `http://[공인IP]:8000/webhook`
6. **메시지** 입력 (중요!):
   ```
   {{strategy.order.alert_message}}
   ```
7. **만들기** 클릭

### 웹훅 JSON 필드 설명

| 필드 | 설명 | 예시 |
|------|------|------|
| `action` | 주문 액션 | `LONG_ENTRY`, `LONG_CLOSE`, `SHORT_ENTRY`, `SHORT_CLOSE` |
| `exchange` | 거래소 | `BINANCE`, `UPBIT`, `BITHUMB`, `BYBIT` |
| `symbol` | 심볼 | `BTCUSDT`, `BTC/KRW` |
| `qty` | 수량 (문자열) | `100USDT`, `50000KRW`, `25%`, `0.01` |
| `leverage` | 레버리지 (선물) | `1`, `5`, `10` |
| `price` | 주문 가격 | `43123.4` |

### 수량(qty) 표현 방식

| 형식 | 설명 | 예시 |
|------|------|------|
| `USDT` | USDT 금액 | `100USDT` = 100 USDT 어치 |
| `KRW` | 원화 금액 | `50000KRW` = 5만원 어치 |
| `%` | 잔고 비율 | `25%` = 잔고의 25% |
| 숫자 | 코인 수량 | `0.01` = 0.01개 |

### 액션(action) 종류

| 액션 | 설명 | 매핑되는 주문 |
|------|------|-------------|
| `LONG_ENTRY` | 롱 진입 | 매수 (BUY) |
| `LONG_CLOSE` | 롱 청산 | 매도 (SELL) |
| `SHORT_ENTRY` | 숏 진입 | 매도 (SELL) |
| `SHORT_CLOSE` | 숏 청산 | 매수 (BUY) |
| `BUY` | 단순 매수 | 매수 |
| `SELL` | 단순 매도 | 매도 |

### 거래소 자동 매핑

웹훅에서 `BINANCE`로 보내면 자동으로 **바이낸스 선물(BINANCE_FUTURES)**로 처리됩니다.

| 웹훅 exchange | 실제 처리 |
|---------------|----------|
| `BINANCE` | 바이낸스 선물 |
| `UPBIT` | 업비트 현물 |
| `BITHUMB` | 빗썸 현물 |
| `BYBIT` | 바이비트 선물 |

---

## 6. 기능별 사용법

### 6.1 잔고 조회

1. 우측 패널에서 거래소 탭 선택 (업비트/빗썸/바이낸스/바이비트)
2. 자동으로 잔고 표시
3. 수동 새로고침: 상단 **새로고침** 버튼

**표시 정보:**
- 자산명 (심볼)
- 보유 수량
- 평가 금액
- 수익률 (%)
- 평균 매수가 (업비트, 빗썸)
- 총 자산

**잔고 행 클릭 시:**
- 해당 심볼의 차트로 자동 전환

### 6.2 수동 주문

좌측 **수동 주문** 패널에서:

1. **거래소 선택**
   - 업비트 (현물)
   - 빗썸 (현물)
   - 바이낸스 (선물)
   - 바이비트 (선물)
   - OKX (개발 중)

2. **심볼 입력**
   - 간단 입력: `BTC`, `ETH`, `XRP`
   - 자동 완성: `BTC` → `BTC/KRW` (국내) 또는 `BTC/USDT:USDT` (해외 선물)

3. **주문 유형**: MARKET (시장가) / LIMIT (지정가)

4. **수량 입력**
   - 단위 선택: KRW/USDT 또는 코인수량
   - 자동 변환: 현재가 기준으로 코인 수량 계산

5. **선물 옵션** (바이낸스/바이비트)
   - 레버리지: 1x ~ 125x (빠른 선택 버튼)
   - 마진모드: ISOLATED (격리) / CROSS (교차)
   - 포지션 사이드: BOTH / LONG / SHORT

6. **매수/매도** 버튼 클릭

7. 확인 다이얼로그에서 주문 내용 확인 후 **예** 클릭

**업비트/빗썸 시장가 주의사항:**
- 매수: 수량 = 원화 금액 (예: 10000 = 1만원어치)
- 매도: 수량 = 코인 수량 (예: 0.001 = 0.001 BTC)

### 6.3 일괄 청산

1. 우측 잔고 패널 하단의 **일괄청산** 버튼 클릭
2. 확인 다이얼로그에서 **예** 클릭
3. 해당 거래소의 모든 보유 자산이 시장가로 매도됨

⚠️ **주의:** 일괄 청산은 되돌릴 수 없습니다!

### 6.4 웹훅 로그 & 주문 내역

**웹훅 로그 탭:**
- 날짜, 시간, 거래소, 심볼, 방향, 수량, 상태 표시
- 상태: SUCCESS (성공), FAILED (실패)
- **더블클릭**: 상세 정보 팝업 (원본 웹훅 JSON 확인)

**주문 내역 탭:**
- 날짜, 시간, 거래소, 심볼, 방향, 체결수량, 단위, 체결가, 출처, 주문ID
- 출처: `webhook` (웹훅) / `manual` (수동)
- 출처별 색상 구분

**하단 컨트롤:**
- 자동 스크롤 체크박스
- DB 새로고침 버튼
- 로그 지우기 버튼

### 6.5 차트

**기능:**
- 실시간 캔들 차트 (lightweight-charts)
- 다중 타임프레임: 1m, 5m, 15m, 1h, 4h, 1d, 1w
- 거래소별 데이터: 업비트, 빗썸, 바이낸스, 바이비트
- 주문 타점 마커 표시 (매수: 초록 ▲, 매도: 빨강 ▼)

**보조지표:**
- SMA (단순이동평균)
- EMA (지수이동평균)
- 볼린저밴드

**차트 설정:**
- 거래소 선택 드롭다운
- 심볼 검색 입력
- 타임프레임 선택
- 마커 표시 토글

### 6.6 토스트 알림

웹훅 수신, 주문 체결 시 화면 우측 하단에 토스트 알림이 표시됩니다.

**설정 (설정 다이얼로그 → UI 설정):**
- 토스트 알림 활성화/비활성화
- 표시 시간 조절 (1~30초)
- 알림음 On/Off

### 6.7 프라이버시 모드

상단 **프라이버시** 토글을 켜면:
- IP 주소: `***.***.***.***`로 표시
- 잔고 금액: `****`로 표시
- 웹훅 로그 상세 정보 숨김

방송이나 화면 공유 시 유용합니다.

---

## 7. 설정 옵션

상단 **설정** 버튼 클릭하여 접근

### 7.1 서버 탭

| 항목 | 설명 | 기본값 |
|------|------|--------|
| 포트 | 웹훅 서버 포트 | 8000 |

### 7.2 API 탭

각 거래소별 API 키 설정:
- 업비트: API Key, Secret Key
- 빗썸: API Key, Secret Key
- 바이낸스: API Key, Secret Key
- 바이비트: API Key, Secret Key
- OKX: API Key, Secret Key, Passphrase

### 7.3 UI 설정 탭

**폰트 설정:**
- 기본 폰트 크기
- 폰트 종류

**잔고 설정:**
- 자동 새로고침
- 새로고침 간격 (초)

**시세 티커 설정:**
- 업비트 시세 표시
- 바이낸스 시세 표시
- 가격 변경 시 깜빡임

**토스트 알림 설정:**
- 토스트 활성화/비활성화
- 표시 시간 (1~30초)
- 알림음 On/Off

**차트 설정:**
- 주문 마커 표시 On/Off

**색상 테마:**
- 액센트 색상
- 매수 색상
- 매도 색상
- 배경색
- 카드 배경색
- 기본 텍스트 색상

⚠️ 색상 변경은 **프로그램 재시작 후** 적용됩니다.

### 7.4 보안 탭

**IP 화이트리스트:**
- TradingView 공식 IP는 자동 허용
- 내부 IP 대역 (127.x, 192.168.x 등) 자동 허용
- 추가 IP 등록/삭제 가능

---

## 8. 문제 해결

### 8.1 서버가 시작되지 않음

**증상:** 서버 상태가 빨간색 "오류"로 표시

**해결:**
1. 포트 충돌 확인 (다른 프로그램이 8000 포트 사용 중인지)
2. 설정에서 다른 포트로 변경 (예: 8080)
3. 방화벽에서 해당 포트 허용

### 8.2 거래소 연결 실패

**증상:** 상태바에서 빨간색 "연결 실패" 표시

**해결:**
1. API 키가 올바르게 입력되었는지 확인
2. API 키의 권한 설정 확인
3. **IP 허용 목록**에 현재 IP가 등록되었는지 확인
4. 거래소 서버 상태 확인

### 8.3 웹훅이 수신되지 않음

**증상:** TradingView에서 알림 발송했으나 로그에 표시 안됨

**해결:**
1. 웹훅 URL 확인 (`http://공인IP:포트/webhook`)
2. 포트 포워딩 설정 확인
3. 방화벽에서 포트 허용 확인
4. TradingView 알림 설정에서 웹훅 URL 체크 확인
5. **Alert 메시지가 `{{strategy.order.alert_message}}`인지 확인**
6. ngrok 사용 시 URL이 만료되지 않았는지 확인

### 8.4 주문이 실패함

**증상:** 상태가 FAILED로 표시

**원인 확인:**
1. 웹훅 로그에서 해당 항목 **더블클릭**
2. 상세 정보 팝업에서 에러 메시지 확인

**일반적인 원인:**
- 잔고 부족
- 최소 주문 수량 미달
- 심볼 형식 오류
- API 권한 부족
- 레버리지/마진모드 설정 오류 (선물)

### 8.5 김치프리미엄이 표시되지 않음

**증상:** 김프가 `---`로 표시

**해결:**
1. 업비트와 바이낸스 모두 BTC 가격이 표시되는지 확인
2. 환율 데이터 수신 확인 (USD/KRW 값)
3. 인터넷 연결 확인

### 8.6 차트가 표시되지 않음

**해결:**
1. 거래소 API 연결 확인
2. 심볼 형식 확인 (예: `BTC/KRW`, `BTC/USDT`)
3. 타임프레임 변경 시도
4. 프로그램 재시작

---

## 9. 주의사항

### 9.1 보안 주의사항

1. **API 키 보안**
   - API 키를 절대 타인과 공유하지 마세요
   - 출금 권한은 비활성화 권장
   - IP 제한 설정 필수

2. **config.yml 보안**
   - config.yml 파일에 API 키가 저장됩니다
   - 이 파일을 절대 공유하지 마세요
   - 백업 시 암호화 권장

3. **화면 공유 시**
   - 프라이버시 모드 활성화
   - API 키 입력 화면 노출 주의

### 9.2 거래 주의사항

1. **테스트 우선**
   - 처음에는 소액으로 테스트
   - 전략 검증 후 금액 증가

2. **시장가 주문**
   - 슬리피지 발생 가능
   - 유동성 낮은 코인 주의

3. **선물 거래**
   - 레버리지 사용 시 손실 위험 증가
   - 마진모드 설정 확인 필수
   - 청산 가격 주의

4. **일괄 청산**
   - 되돌릴 수 없는 작업
   - 신중하게 사용

5. **24시간 운영 시**
   - 안정적인 인터넷 연결 필요
   - UPS(무정전전원장치) 권장
   - 원격 모니터링 설정 권장

### 9.3 법적 고지

- 이 프로그램은 거래 도구일 뿐, 투자 조언을 제공하지 않습니다
- 암호화폐 거래는 높은 위험을 수반합니다
- 투자 손실에 대한 책임은 사용자에게 있습니다
- 거주 국가의 관련 법규를 준수하세요

---

## 10. 라이센스

Copyright (c) 2025, 고잉 All rights reserved.

본 소프트웨어 및 관련 문서(이하 "소프트웨어")는
**개인적, 교육적, 연구 목적에 한하여** 사용이 허용됩니다.

다음 행위는 **명시적으로 금지**됩니다:

- 상업적 사용, 판매, 재판매, 임대, 서비스 제공
- 본 소프트웨어를 이용한 수익 창출 행위
- 본 소프트웨어의 전부 또는 일부를 포함한 상업적 제품/서비스 배포
- 사전 서면 허가 없는 재배포

상업적 사용을 원할 경우, 저작권자의 **사전 서면 허가**를 받아야 합니다.

---

## 연락처

- **카카오톡 오픈채팅**: [트레이딩뷰 유저 코리아](https://open.kakao.com/o/gYMmhcYg)
- **개발자 문의**: 트레이더 고잉 [카카오톡](https://open.kakao.com/me/trader_going) | [텔레그램](https://t.me/trader_going)

---

*마지막 업데이트: 2025년 12월*
